<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cousine:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="style.css">
    <meta charset="UTF-8">

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!--    <link type="image/png" rel="icon" href="images/icon.png">-->

    <title>Images of the Russian Empire</title>
</head>
<body>

<div class="menu">
    <ul>
        <li><a href="#overview">OVERVIEW</a></li>
        <li><a href="#approach">APPROACH</a></li>
        <li><a href="#single">SINGLE-SCALE ALIGNMENT</a></li>
        <li><a href="#multi">MULTI-SCALE ALIGNMENT</a></li>
        <li><a href="#bells">BELLS & WHISTLES</a></li>
    </ul>
</div>

<div class="content">
<div class="header">Images of the Russian Empire:</div>
<div class="subheader">Colorizing the Prokudin-Gorskii photo collection</div>
<div class="subheader">Elana Ho</div>

<table><tr>
    <td>
        <div class="center">
            <img src="images/edge_align_edge_crop/out_emir.jpg" class="single-image"/>
            <!--            <span>Figure 1:</span>-->
        </div>
    </td>
</tr></table>


<div class="content-item">
    <a class="anchor" id="overview"></a>
    <div class="subheader_left">Overview</div>
    <p>This project aims to colorize the Prokudin-Gorskii photo collection using Python image processing techniques. Given the digitized glass plate images, the algorithm extracts the three color channel images, places them on top of each other, and aligns them so that they form a single RGB color image. </p>
</div>

<br>

<div class="content-item">
    <a class="anchor" id="approach"></a>
    <div class="subheader_left">Approach</div>

    <p>The photo collection consists of image files each containing three glass plate negatives in the order BGR. Thus, given a file, we split it into the three channels, and then align each of them over each other to produce the full-color image. In my algorithm, I used blue as the reference channel, aligning green and red to it, since this method was found to generate the best results. </p>

    <p>The alignment functions <span class="code">align_channel</span>, <span class="code">pyramid_align</span>, and <span class="code">edge_align</span> each determine the best offset to optimize alignment of the color channels using the sum of squared differences (SSD) with some differences in complexity and strategy.</p>

    $$SSD = \sum^n_{i=0} (A_i - B_i)^2 $$

    <ul>
        <li>$n=$ total number of values in the array</li>
        <li>$A, B=$ arrays representing the two images to be aligned</li>
    </ul>

    <p>Once the channels have been aligned, they are stacked together to create the final color image.</p>

</div>

<br>

<div class="content-item">
    <a class="anchor" id="single"></a>
    <div class="subheader_left">Single-scale Alignment</div>
    <p>In the naive solution, <span class="code">align_channel</span>, aligns two channels by searching over a window of possible displacements (the range is set to [-15, 15] for both $x$ and $y$ by default). The images are first cropped by a percentage ($8\%$ of the height and width by default). Then, for each possible displacement, the reference channel is kept constant while the other is shifted by the displacement using <span class="code">np.roll</span>, and the SSD is calculated. Throughout this process, a running minimum SSD is updated, and in the end, the optimal displacement is applied.</p>

    <!-- TODO: naive images with per crop -->

    <h4>Low-quality Images (JPG)</h4>
    <table><tr>
        <td>
            <div class="center">
                <img src="images/naive_align_per_crop/out_cathedral.jpg" class="single-image"/> <br>
                <span>Figure 1: cathedral.jpg aligned using single-scale alignment. <br> G: $(1, -1)$ <br> R: $(7, -1)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/naive_align_per_crop/out_monastery.jpg" class="single-image"/> <br>
                <span>Figure 2: monastery.jpg aligned using single-scale alignment. <br> G: $(-6, 0)$ <br> R: $(9, 1)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/naive_align_per_crop/out_tobolsk.jpg" class="single-image"/> <br>
                <span>Figure 3: tobolsk.jpg aligned using single-scale alignment. <br> G: $(3, 2)$ <br> R: $(6, 3)$</span>
            </div>
        </td>
    </tr></table>

    <h4>High-quality Images (TIF)</h4>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/naive_align_per_crop/out_emir.jpg" class="single-image"/> <br>
                <span>Figure 4: emir.tif aligned using single-scale alignment. <br> G: $(-3, 7)$ <br> R: $(-15, 15)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/naive_align_per_crop/out_icon.jpg" class="single-image"/> <br>
                <span>Figure 5: icon.tif aligned using single-scale alignment. <br> G: $(15, 15)$ <br> R: $(-15, -7)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/naive_align_per_crop/out_melons.jpg" class="single-image"/> <br>
                <span>Figure 6: melons.tif aligned using single-scale alignment. <br> G: $(15, -4)$ <br> R: $(15, -8)$</span>
            </div>
        </td>
    </tr></table>

</div>

<br>

<div class="content-item">
    <a class="anchor" id="multi"></a>
    <div class="subheader_left">Multi-scale Alignment</div>
    <p>While single-scale alignment performs well for small images, it is too expensive for large images. To handle large images, multi-scale alignment was implemented using an image pyramid in the function <span class="code">pyramid_align</span>. For two channels to be aligned, the images are first cropped by a predetermined percentage as in single-scale alignment, and then continually resized by $1/2$ $10$ times or until they reach the base case ($size < 32$); each of these resized images is then stored in the pyramid along with the original. Iterating from coarsest to finest resolution, the images are aligned using single-scale alignment which outputs an offset. The offsets from each level in the pyramid are accumulated into one final offset, accounting for the different scaling factors of each image.</p>

    <!-- TODO: pyramid images with per crop -->
    <h4>Low-quality Images (JPG)</h4>
    <table><tr>
        <td>
            <div class="center">
                <img src="images/pyr_align_per_crop/out_cathedral.jpg" class="single-image"/> <br>
                <span>Figure 7: cathedral.jpg aligned using multi-scale alignment. <br> G: $(-282, -326)$ <br> R: $(-275, -325)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/pyr_align_per_crop/out_monastery.jpg" class="single-image"/> <br>
                <span>Figure 8: monastery.jpg aligned using multi-scale alignment. <br> G: $(-290, -327)$ <br> R: $(-284, -327)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/pyr_align_per_crop/out_tobolsk.jpg" class="single-image"/> <br>
                <span>Figure 9: tobolsk.jpg aligned using multi-scale alignment. <br> G: $(-284, -332)$ <br> R: $(-281, -331)$</span>
            </div>
        </td>
    </tr></table>

    <h4>High-quality Images (TIF)</h4>
    <table>
        <tr>
        <td>
            <div class="center">
                <img src="images/pyr_align_per_crop/out_emir.jpg" class="single-image"/> <br>
                <span>Figure 10: emir.tif aligned using multi-scale alignment. <br> G: $(-2648, -3086)$ <br> R: $(-2697, -860)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/pyr_align_per_crop/out_church.jpg" class="single-image"/> <br>
                <span>Figure 11: church.tif aligned using multi-scale alignment. <br> G: $(-2665, -3050)$ <br> R: $(-2632, -3058)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/pyr_align_per_crop/out_three_generations.jpg" class="single-image"/> <br>
                <span>Figure 12: three_generations.tif aligned using multi-scale alignment. <br> G: $(-2644, -3106)$ <br> R: $(-2583, -3109)$</span>
            </div>
        </td>
    </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_melons.jpg" class="single-image"/> <br>
                    <span>Figure 13: melons.tif aligned using multi-scale alignment. <br> G: $(-2641, -3158)$ <br> R: $(-2544, -3155)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_onion_church.jpg" class="single-image"/> <br>
                    <span>Figure 14: onion_church.tif aligned using multi-scale alignment. <br> G: $(-2650, -3151)$ <br> R: $(-2593, -3141)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_train.jpg" class="single-image"/> <br>
                    <span>Figure 15: train.tif aligned using multi-scale alignment. <br> G: $(-2678, -3138)$ <br> R: $(-2633, -3111)$</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_icon.jpg" class="single-image"/> <br>
                    <span>Figure 16: icon.tif aligned using multi-scale alignment. <br> G: $(-2685, -3126)$ <br> R: $(-2567, -3120)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_self_portrait.jpg" class="single-image"/> <br>
                    <span>Figure 17: self_portrait.itf aligned using multi-scale alignment. <br> G: $(-8115, -9577)$ <br> R: $(-10748, -9569)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_harvesters.jpg" class="single-image"/> <br>
                    <span>Figure 18: harvesters.tif aligned using multi-scale alignment. <br> G: $(-2645, -3079)$ <br> R: $(-2580, -3082)$</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_sculpture.jpg" class="single-image"/> <br>
                    <span>Figure 19: sculpture.tif aligned using multi-scale alignment. <br> G: $(-8178, -9587)$ <br> R: $(-9071, -9603)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_lady.jpg" class="single-image"/> <br>
                    <span>Figure 20: lady.tif aligned using multi-scale alignment. <br> G: $(-2651, -3152)$ <br> R: $(-2589, -3150)$</span>
                </div>
            </td>
        </tr>
    </table>

</div>

<br>

<div class="content-item">
    <a class="anchor" id="bells"></a>
    <div class="subheader_left">Bells & Whistles</div>

    <h3>Automatic Cropping</h3>
    <p>Rather than cropping images using a predefined percentage, automatic cropping was implemented to use edge detection to remove borders while preserving as much of the original image content as possible. For each color channel, an edge map is generated. First, contrast is increased and Gaussian blur is applied to reduce noise. Then <span class="code">skimage.filters.sobel</span> is used to detect the edges in the image. Given the edge maps, <span class="code">cv2.findContours</span> finds the boundaries of the edges, and <span class="code">cv2.boundingRect</span> computes the smallest bounding box that fully contains each contour. For all three channels, the minimum height and width of the bounding box is taken and used as the final dimensions to crop the images.</p>

    <p>With automatic cropping, <span class="code">emir.tif</span> was able to be aligned successfully.</p>

    <table>
        <tr>
            <td>
                <div class="center">
                    <img src="images/naive_align_per_crop/out_emir.jpg" class="single-image"/> <br>
                    <span>emir.tif aligned using single-scale alignment after cropping by a fixed percentage (Figure 4). <br> G: $(-3, 7)$ <br> R: $(-15, 15)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_emir.jpg" class="single-image"/> <br>
                    <span>emir.tif aligned using multi-scale alignment after cropping by a fixed percentage (Figure 10). <br> G: $(-2648, -3086)$ <br> R: $(-2697, -860)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_emir.jpg" class="single-image"/> <br>
                    <span>emir.tif aligned using multi-scale alignment after automatic cropping (Figure 24). <br> G: $(-9355, -10590)$ <br> R: $(-9299, -7030)$</span>
                </div>
            </td>
        </tr>
    </table>

    <h4>Low-quality Images (JPG)</h4>
    <table><tr>
        <td>
            <div class="center">
                <img src="images/pyr_align_edge_crop/out_cathedral.jpg" class="single-image"/> <br>
                <span>Figure 21: cathedral.jpg aligned using multi-scale alignment after automatic cropping. <br> G: $(-338, -375)$ <br> R: $(-334, -376)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/pyr_align_edge_crop/out_monastery.jpg" class="single-image"/> <br>
                <span>Figure 22: monastery.jpg aligned using multi-scale alignment after automatic cropping. <br> G: $(-339, -379)$ <br> R: $(-338, -378)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/pyr_align_edge_crop/out_tobolsk.jpg" class="single-image"/> <br>
                <span>Figure 23: tobolsk.jpg aligned using multi-scale alignment after automatic cropping. <br> G: $(-338, -383)$ <br> R: $(-335, -384)$</span>
            </div>
        </td>
    </tr></table>

    <h4>High-quality Images (TIF)</h4>
    <table>
        <tr>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_emir.jpg" class="single-image"/> <br>
                    <span>Figure 24: emir.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9355, -10590)$ <br> R: $(-9299, -7030)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_church.jpg" class="single-image"/> <br>
                    <span>Figure 25: church.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9497, -10563)$ <br> R: $(-9441, -10599)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_three_generations.jpg" class="single-image"/> <br>
                    <span>Figure 26: three_generations.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-8602, -10474)$ <br> R: $(-8745, -10479)$</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_melons.jpg" class="single-image"/> <br>
                    <span>Figure 27: melons.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9321, -10626)$ <br> R: $(-9291, -10626)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_onion_church.jpg" class="single-image"/> <br>
                    <span>Figure 28: onion_church.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9593, -7540)$ <br> R: $(-9537, -7527)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_train.jpg" class="single-image"/> <br>
                    <span>Figure 29: train.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9519, -10852)$ <br> R: $(-9413, -10778)$</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_icon.jpg" class="single-image"/> <br>
                    <span>Figure 30: icon.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9069, -10612)$ <br> R: $(-8815, -10447)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_self_portrait.jpg" class="single-image"/> <br>
                    <span>Figure 31: self_portrait.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9237, -10589)$ <br> R: $(-9081, -10580)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_harvesters.jpg" class="single-image"/> <br>
                    <span>Figure 32: harvesters.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9536, -11052)$ <br> R: $(-9397, -11051)$</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_sculpture.jpg" class="single-image"/> <br>
                    <span>Figure 33: sculpture.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9436, -10959)$ <br> R: $(-9390, -10977)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_lady.jpg" class="single-image"/> <br>
                    <span>Figure 34: lady.tif aligned using multi-scale alignment after automatic cropping. <br> G: $(-9306, -10716)$ <br> R: $(-9259, -10719)$</span>
                </div>
            </td>
        </tr>
    </table>

    <p>The fully colored result is a larger image, closer to the original size, compared to the images produced with the initial strategy of using a fixed percentage to crop the borders. While the resulting image is larger, this comes at the cost of a less accurate alignment for some of the files. This is hypothesized to be due to the inclusion of more noisy data on the borders of the image along the black outlines. On the other hand, the initial method of cropping $8\%$ of the height and width focuses on the more important data well within the borders which produces a noticeably better alignment in some cases. To mitigate these issues with automatic cropping, edge-detection alignment was explored as a potential solution.</p>

    <h3>Edge-detection Alignment</h3>
    <p>Rather than RGB similarity, in the function <span class="code">edge_align</span>, alignment of the channels was done based on the edges. After cropping, the edge maps of the channels were generated using <span class="code">skimage.filters.sobel</span>. Then, <span class="code">pyramid_align</span> was run on these edge maps to determine the optimal offset. The channels were shifted using these offsets, and then stacked to produce the final color image.</p>

    <h4>Low-quality Images (JPG)</h4>
    <table><tr>
        <td>
            <div class="center">
                <img src="images/edge_align_edge_crop/out_cathedral.jpg" class="single-image"/> <br>
                <span>Figure 35: cathedral.jpg aligned using edge-detection alignment after automatic cropping. <br> G: $(-336, -373)$ <br> R: $(-329, -373)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/edge_align_edge_crop/out_monastery.jpg" class="single-image"/> <br>
                <span>Figure 36: monastery.jpg aligned using edge-detection alignment after automatic cropping. <br> G: $(-344, -379)$ <br> R: $(-338, -380)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/edge_align_edge_crop/out_tobolsk.jpg" class="single-image"/> <br>
                <span>Figure 37: tobolsk.jpg aligned using edge-detection alignment after automatic cropping. <br> G: $(-338, -383)$ <br> R: $(-335, -384)$</span>
            </div>
        </td>
    </tr></table>

    <h4>High-quality Images (TIF)</h4>
    <table>
        <tr>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_emir.jpg" class="single-image"/> <br>
                    <span>Figure 38: emir.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-9356, -10591)$ <br> R: $(-9298, -10574)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_church.jpg" class="single-image"/> <br>
                    <span>Figure 39: church.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-9473, -10561)$ <br> R: $(-9440, -10603)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_three_generations.jpg" class="single-image"/> <br>
                    <span>Figure 40: three_generations.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-8603, -10479)$ <br> R: $(-8745, -10480)$</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_melons.jpg" class="single-image"/> <br>
                    <span>Figure 41: melons.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-9325, -10626)$ <br> R: $(-9293, -7084)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_onion_church.jpg" class="single-image"/> <br>
                    <span>Figure 42: onion_church aligned using edge-detection alignment after automatic cropping. <br> G: $(-9593, -7538)$ <br> R: $(-9548, -7527)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_train.jpg" class="single-image"/> <br>
                    <span>Figure 43: train.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-9521, -10854)$ <br> R: $(-9477, -10757)$</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_icon.jpg" class="single-image"/> <br>
                    <span>Figure 44: icon.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-9069, -10612)$ <br> R: $(-8814, -10446)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_self_portrait.jpg" class="single-image"/> <br>
                    <span>Figure 45: self_portrait.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-9238, -10588)$ <br> R: $(-9079, -10579)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_harvesters.jpg" class="single-image"/> <br>
                    <span>Figure 46: harvesters.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-9583, -11055)$ <br> R: $(-9468, -11046)$</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_sculpture.jpg" class="single-image"/> <br>
                    <span>Figure 47: sculpture.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-9436, -10959)$ <br> R: $(-9390, -10977)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_lady.jpg" class="single-image"/> <br>
                    <span>Figure 48: lady.tif aligned using edge-detection alignment after automatic cropping. <br> G: $(-93903, -10710)$ <br> R: $(-9237, -10734)$</span>
                </div>
            </td>
        </tr>
    </table>

    <p>In conclusion, edge-detection alignment used in conjunction with automatic cropping produced, on average, the highest quality results, preserving the original image content as much as possible.</p>

    <!-- TODO: insert cathedral and train -->

    <table>
        <tr>
        <td>
            <div class="center">
                <img src="images/pyr_align_per_crop/out_train.jpg" class="single-image"/> <br>
                <span>train.tif aligned using multi-scale alignment after cropping by a fixed percentage (Figure 15). <br> G: $(-2678, -3138)$ <br> R: $(-2633, -3111)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/pyr_align_edge_crop/out_train.jpg" class="single-image"/> <br>
                <span>train.tif aligned using multi-scale alignment after automatic cropping (Figure 29). <br> G: $(-9519, -10852)$ <br> R: $(-9413, -10778)$</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/edge_align_edge_crop/out_train.jpg" class="single-image"/> <br>
                <span>train.tif aligned using edge-detection alignment after automatic cropping (Figure 43). <br> G: $(-9521, -10854)$ <br> R: $(-9477, -10757)$</span>
            </div>
        </td>
        </tr>
    </table>

    <table>
        <tr>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_cathedral.jpg" class="single-image"/> <br>
                    <span>cathedral.jpg aligned using multi-scale alignment after cropping by a fixed percentage (Figure 7). <br> G: $(-282, -326)$ <br> R: $(-275, -325)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_cathedral.jpg" class="single-image"/> <br>
                    <span>cathedral.jpg aligned using multi-scale alignment after automatic cropping (Figure 21). <br> G: $(-338, -375)$ <br> R: $(-334, -376)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_cathedral.jpg" class="single-image"/> <br>
                    <span>cathedral.jpg aligned using edge-detection alignment after automatic cropping (Figure 35). <br> G: $(-336, -373)$ <br> R: $(-329, -373)$</span>
                </div>
            </td>
        </tr>
    </table>
    <p> However, for <span class="code">church.tif</span>, <span class="code">harvesters.tif</span>, and <span class="code">lady.tif</span>, using fixed-percentage cropping with either <span class="code">pyramid_align</span> or <span class="code">edge_align</span> led to better alignments, though sacrificing some of the original visual data along the borders. </p>

    <table>
        <tr>
            <td>
                <div class="center">
                    <img src="images/edge_align_per_crop/out_church.jpg" class="single-image"/> <br>
                    <span> Figure 49: church.tif aligned using edge-detection alignment after cropping by a fixed percentage. <br> G: $(-2665, -3050)$ <br> R: $(-2632, -3058)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_church.jpg" class="single-image"/> <br>
                    <span>church.tif aligned using multi-scale alignment after cropping by a fixed percentage (Figure 11). <br> G: $(-2665, -3050)$ <br> R: $(-2632, -3058)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_church.jpg" class="single-image"/> <br>
                    <span>church.tif aligned using edge-detection alignment after automatic cropping (Figure 39). <br> G: $(-9473, -10561)$ <br> R: $(-9440, -10603)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_church.jpg" class="single-image"/> <br>
                    <span>church.tif aligned using multi-scale alignment after automatic cropping (Figure 25). <br> G: $(-9497, -10563)$ <br> R: $(-9441, -10599)$</span>
                </div>
            </td>
        </tr>
    </table>

    <table>
        <tr>
            <td>
                <div class="center">
                    <img src="images/edge_align_per_crop/out_lady.jpg" class="single-image"/> <br>
                    <span> Figure 50: lady.tif aligned using edge-detection alignment after cropping by a fixed percentage. <br> G: $(-2644, -3152)$ <br> R: $(-2580, -3148)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_per_crop/out_lady.jpg" class="single-image"/> <br>
                    <span>lady.tif aligned using multi-scale alignment after cropping by a fixed percentage (Figure 20). <br> G: $(-2651, -3152)$ <br> R: $(-2589, -3150)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/edge_align_edge_crop/out_lady.jpg" class="single-image"/> <br>
                    <span>lady.tif aligned using edge-detection alignment after automatic cropping (Figure 48). <br> G: $(-93903, -10710)$ <br> R: $(-9237, -10734)$</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/pyr_align_edge_crop/out_lady.jpg" class="single-image"/> <br>
                    <span>lady.tif aligned using multi-scale alignment after automatic cropping (Figure 34). <br> G: $(-9306, -10716)$ <br> R: $(-9259, -10719)$</span>
                </div>
            </td>
        </tr>
    </table>

</div>

<br>

</div>
</body>
</html>