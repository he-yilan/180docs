<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cousine:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="style.css">
    <meta charset="UTF-8">

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!--    <link type="image/png" rel="icon" href="images/icon.png">-->

    <title>Fun with Filters and Frequencies</title>
</head>
<body>

<div class="menu">
    <ul>
        <li><a href="#overview">OVERVIEW</a></li>
        <li><a href="#finite">FINITE DIFFERENCE <br> OPERATOR</a></li>
        <li><a href="#dog">DERIVATIVE OF <br> GAUSSIAN</a></li>
        <li><a href="#sharp">IMAGE <br> SHARPENING</a></li>
        <li><a href="#hybrid">HYBRID IMAGES</a></li>
        <li><a href="#stacks">GAUSSIAN & <br> LAPLACIAN STACKS</a></li>
        <li><a href="#blend">MULTIRESOLUTIONAL <br> BLENDING</a></li>
    </ul>
</div>

<div class="content">
<div class="header">Fun with Filters and Frequencies</div>
<div class="subheader">Elana Ho</div>

<table><tr>
    <td>
        <div class="center">
            <img src="images/blend/out_luna_nightcity.jpg" class="single-image"/>
        </div>
    </td>
</tr></table>


<div class="content-item">
    <a class="anchor" id="overview"></a>
    <div class="subheader_left">Overview</div>
    <p>This project explores the use of image frequency manipulation to modify images and produce compelling visual effects. Starting from applying filters to blur and sharpen features, we are then able to create hybrid and blended images by combining different frequencies and utilizing Gaussian and Laplacian stacks.  </p>
</div>

<br>

<div class="content-item">
    <a class="anchor" id="finite"></a>
    <div class="subheader_left">Finite Difference Operator</div>
    <p>An edge detection algorithm was implemented by using the finite difference operators $Dx$ and $Dy$.</p>

    $$ D_x = \begin{bmatrix} 1 & -1 \end{bmatrix}$$
    $$ D_y = \begin{bmatrix} 1 \\ -1 \end{bmatrix}$$

    <p>$Dx$ calculates changes in intensity of adjacent pixels in the horizontal direction, while its transpose, $Dy$ calculates changes in the vertical direction. Thus, convolving the image with $Dx$ and $Dy$ produces the partial derivatives in $x$ and $y$ respectively. These partial derivatives can then be combined to compute the gradient magnitude $G_m$ which shows the strength in changes in intensity.</p>

    $$\frac{\partial Img}{\partial x} = Img * D_x $$

    $$\frac{\partial Img}{\partial y} = Img * D_y $$

    $$G_m = \sqrt{(\frac{\partial Img}{\partial x})^2 + (\frac{\partial Img}{\partial y})^2}$$

    <p>This gradient magnitude image is then binarized to produce the edge image.</p>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/cameraman/cameraman.png" class="single-image"/> <br>
                <span>Figure X: Original image <span class="code">cameraman.png</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/cameraman/out_Dxderiv.jpg" class="single-image"/> <br>
                <span>Figure X: Partial $x$ derivative.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/cameraman/out_Dyderiv.jpg" class="single-image"/> <br>
                <span>Figure X: Partial $y$ derivative.</span>
            </div>
        </td>
    </tr></table>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/cameraman/out_cameraman.jpg" class="single-image"/> <br>
                <span>Figure X: Binarized edge image with threshold $= 0.25$.</span>
            </div>
        </td>
    </tr></table>

</div>

<br>

<div class="content-item">
    <a class="anchor" id="dog"></a>
    <div class="subheader_left">Derivative of Gaussian (DoG) Filter</div>

    <p>While the finite difference operators are effective in detecting changes in pixel intensity, they can be sensitive to noise. To reduce noise, the function <span class="code">gaussian_blur</span> was created to blur the image using a 2D Gaussian filter. By first blurring the image, and then applying the finite difference operators, smoother results were produced. For these images, the Gaussian kernel was created with radius $r=3$ and standard deviation $\sigma=1$.</p>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/cameraman/out_Dxderiv_g.jpg" class="single-image"/> <br>
                <span>Figure X: Partial $x$ derivative <br> after Gaussian blur.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/cameraman/out_Dyderiv_g.jpg" class="single-image"/> <br>
                <span>Figure X: Partial $y$ derivative <br> after Gaussian blur.</span>
            </div>
        </td>
    </tr></table>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/cameraman/out_cameraman_g.jpg" class="single-image"/> <br>
                <span>Figure X: Binarized edge image with threshold $= 0.1$.</span>
            </div>
        </td>
    </tr></table>

    <p>Compared to the initial result without filtering, the filtered edge image has smoother, clearer lines and fewer dots of noise. </p>

    <p>Alternatively, because convolution is commutative, the same effect can also be achieved by using the derivative of the Gaussian (DoG) filter. To this end, the Gaussian kernel was convolved with $Dx$ and $Dy$, and then the image was convolved with $Dx$ and $Dy$ to show the partial derivatives.</p>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/cameraman/out_Dx_dog.jpg" class="single-image"/> <br>
                <span>Figure X: $D_x$ after convolving with the Gaussian kernel.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/cameraman/out_Dy_dog.jpg" class="single-image"/> <br>
                <span>Figure X: $D_y$ after convolving with the Gaussian kernel.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/cameraman/out_Dxderiv_dog.jpg" class="single-image"/> <br>
                <span>Figure X: Partial $x$ derivative using the derivative of the Gaussian.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/cameraman/out_Dyderiv_g.jpg" class="single-image"/> <br>
                <span>Figure X: Partial $y$ derivative using the derivative of the Gaussian.</span>
            </div>
        </td>
    </tr></table>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/cameraman/out_cameraman_dog.jpg" class="single-image"/> <br>
                <span>Figure X: Binarized edge image with threshold $= 0.097$.</span>
            </div>
        </td>
    </tr></table>

</div>

<br>

<div class="content-item">
    <a class="anchor" id="sharp"></a>
    <div class="subheader_left">Image Sharpening</div>

    <p>In order to sharpen an image $f$, an unsharp mask filter can be used. By convolving with a Gaussian filter, the image is blurred to retain the image's low frequencies. Thus, to extract the high frequencies, the blurred image is extracted from the original image. The high frequencies are then multiplied by the sharpening factor $\alpha$ and added back to the original image</p>

    $$f_{\text{sharp}} = f + \alpha (f - f * g) = (1 + \alpha) f - \alpha f * g = f * ((1 + \alpha)e - \alpha g)$$

    <ul>
        <li>$f =$ original image</li>
        <li>$f_{\text{sharp}} =$ sharpened image</li>
        <li>$g =$ Gaussian filter</li>
        <li>$\alpha =$ sharpening factor that controls the strength of the high-frequency details added back to the original image</li>
        <li>$e =$ unit impulse filter </li>
    </ul>

    For these images, the Gaussian kernel was created with radius $r=3$ and standard deviation $\sigma=1$.

    <table><tr>
        <td>
            <div class="center">
                <img src="images/sharpen/taj.jpg" class="single-image"/> <br>
                <span>Figure X: Original image <br> <span class="code">taj.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/sharpen/out_taj2.jpg" class="single-image"/> <br>
                <span>Figure X: Sharpened <span class="code">taj.jpg</span> <br> with $\alpha=2$.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/sharpen/out_taj5.jpg" class="single-image"/> <br>
                <span>Figure X: Sharpened <span class="code">taj.jpg</span> <br> with $\alpha=5$.</span>
            </div>
        </td>
    </tr></table>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/sharpen/montmartre.jpg" class="single-image"/> <br>
                <span>Figure X: Original image <br> <span class="code">montmartre.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/sharpen/out_montmartre2.jpg" class="single-image"/> <br>
                <span>Figure X: Sharpened <span class="code">montmartre.jpg</span> <br> with $\alpha=2$.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/sharpen/out_montmartre5.jpg" class="single-image"/> <br>
                <span>Figure X: Sharpened <span class="code">montmartre.jpg</span> <br> with $\alpha=5$.</span>
            </div>
        </td>
    </tr></table>

    <p>Increasing $\alpha$ strengthens the high-frequency details in the sharpened image.</p>

    <h4>Re-sharpening a Blurred Image</h4>

    <p>In the following process, the original image of my cat Luna <span class="code">luna_small.jpg</span> was first blurred and then "restored" by applying the unsharp mask filter. </p>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/sharpen/luna_small.jpg" class="single-image"/> <br>
                <span>Figure X: Original image <br> <span class="code">luna_small.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/sharpen/luna_small_blurred.jpg" class="single-image"/> <br>
                <span>Figure X: Blurred image <br> <span class="code">luna_small_blurred.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/sharpen/out_luna_small_blurred2.jpg" class="single-image"/> <br>
                <span>Figure X: Blurred then sharpened with $\alpha=2$.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/sharpen/out_luna_small_blurred5.jpg" class="single-image"/> <br>
                <span>Figure X: Blurred then sharpened with $\alpha=5$.</span>
            </div>
        </td>
    </tr></table>

</div>

<br>

<div class="content-item">
    <a class="anchor" id="hybrid"></a>
    <div class="subheader_left">Hybrid Images</div>

    <p>High-pass and low-pass filters can be used to create hybrid images by combining the low-frequency components of one image, <span class="code">lo_im</span>, with the high-frequency components of another, <span class="code">hi_im</span>. When overlaid, <span class="code">hi_im</span> is prominent when viewed up close, while the lower frequencies from <span class="code">lo_im</span> dominate from a distance, as low-frequency features are more easily perceived at a longer distance.</p>

    <h4>Derek & Nutmeg</h4>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/hybrid/DerekPicture.jpg" class="single-image"/> <br>
                <span>Figure X: Original image <br> <span class="code">DerekPicture.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/nutmeg.jpg" class="single-image"/> <br>
                <span>Figure X: Original image <br> <span class="code">nutmeg.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_dereknutmeg_gray.jpg" class="single-image"/> <br>
                <span>Figure X: Grayscale hybrid image of Derek & Nutmeg.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_dereknutmeg2.jpg" class="single-image"/> <br>
                <span>Figure X: Colored hybrid image of Derek & Nutmeg.</span>
            </div>
        </td>
    </tr></table>

    <h4>Real-life Elana & Elana as a drawing</h4>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/hybrid/elana_pensive_real.jpg" class="single-image"/> <br>
                <span>Figure X: Elana at La Note.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/elana_pensive_drawing.jpg" class="single-image"/> <br>
                <span>Figure X: Elana's self-portrait drawn using Procreate.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_elana_gray.jpg" class="single-image"/> <br>
                <span>Figure X: Grayscale hybrid image of Elana.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_elana.jpg" class="single-image"/> <br>
                <span>Figure X: Colored hybrid image of Elana.</span>
            </div>
        </td>
    </tr></table>

    <h4>Real-life motorcycle & drawing of a motorcycle</h4>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/hybrid/moto_ref.jpg" class="single-image"/> <br>
                <span>Figure X: Real 2011 BMW R1200GS.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/moto3.jpg" class="single-image"/> <br>
                <span>Figure X: Drawing of the 2011 BMW R1200GS (graphite on paper).</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_moto_gray.jpg" class="single-image"/> <br>
                <span>Figure X: Grayscale hybrid image of the motorcycle.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_moto.jpg" class="single-image"/> <br>
                <span>Figure X: Colored hybrid image of the motorcycle.</span>
            </div>
        </td>
    </tr></table>

    <h4>Prof. Efros & Prof. Ng</h4>

    <table><tr>
        <td>
            <div class="center">
                <img src="images/hybrid/efros.jpg" class="single-image"/> <br>
                <span>Figure X: Computer vision professor Alexei Efros <span class="code">efros.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/yirenng.jpg" class="single-image"/> <br>
                <span>Figure X: Computer graphics professor Ren Ng <br> <span class="code">yirenng.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_graphics_gray.jpg" class="single-image"/> <br>
                <span>Figure X: Grayscale hybrid image of the two professors.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_graphics.jpg" class="single-image"/> <br>
                <span>Figure X: Colored hybrid image of the two professors.</span>
            </div>
        </td>
    </tr>
        <tr>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_freq1.jpg" class="single-image"/> <br>
                <span>Figure X: Frequency analysis of <span class="code">efros.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_freq2.jpg" class="single-image"/> <br>
                <span>Figure X: Frequency analysis of <span class="code">yirenng.jpg</span>.</span>
            </div>
        </td>
            <td>
                <div class="center">
                    <img src="images/hybrid/hybrid_freq1_filtered.jpg" class="single-image"/> <br>
                    <span>Figure X: Frequency analysis of <span class="code">efros.jpg</span> after low-pass filtering.</span>
                </div>
            </td>
            <td>
                <div class="center">
                    <img src="images/hybrid/hybrid_freq2_filtered.jpg" class="single-image"/> <br>
                    <span>Figure X: Frequency analysis of <span class="code">yirenng.jpg</span> after high-pass filtering.</span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="center">
                    <img src="images/hybrid/hybrid_graphics_frequency.jpg" class="single-image"/> <br>
                    <span>Figure X: Frequency analysis of the professors' hybrid image.</span>
                </div>
            </td>
        </tr>
    </table>

    <p></p>

</div>

<br>

<div class="content-item">
    <a class="anchor" id="stacks"></a>
    <div class="subheader_left">Gaussian & Laplacian Stacks</div>
    <p>Building off of the techniques to devise low-pass and high-pass filters, band-pass filters can be created to blend images smoothly. In order to blend one image, <span class="code">im1</span>, with another, <span class="code">im2</span>, Gaussian and Laplacian stacks are implemented. As opposed to a Gaussian pyramid, images in a Gaussian stack are not downsampled; instead, the Gaussian filter is successively applied at each level, preserving the image dimensions. Therefore, each successive level in the Gaussian stack stores increasingly low frequencies. The Gaussian stack is then used to build the Laplacian stack. Each level $i$ in the Laplacian stack $L$ is computed from images in the Gaussian stack $G$ as follows:</p>
    $$L_i = G_i - G_{i + 1}$$
    <p>This computation effectively applies a band-pass filter to the image, allowing important details to be isolated in each band. Having built Gaussian and Laplacian stacks for <span class="code">im1</span> and <span class="code">im2</span>, the stacks can then be utilized for multiresolutional blending.</p>

    <p>Given the input images <span class="code">apple.jpeg</span> and <span class="code">orange.jpeg</span>, the images are first converted to grayscale (by taking only one of the color channels) and then filtered to build the Gaussian and Laplacian stacks.</p>
    <table><tr>
        <td>
            <div class="center">
                <img src="images/blend/" class="single-image"/> <br>
                <span>Figure X: Original image <br> <span class="code">DerekPicture.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/nutmeg.jpg" class="single-image"/> <br>
                <span>Figure X: Original image <br> <span class="code">nutmeg.jpg</span>.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_dereknutmeg_gray.jpg" class="single-image"/> <br>
                <span>Figure X: Grayscale hybrid image of Derek & Nutmeg.</span>
            </div>
        </td>
        <td>
            <div class="center">
                <img src="images/hybrid/hybrid_dereknutmeg2.jpg" class="single-image"/> <br>
                <span>Figure X: Colored hybrid image of Derek & Nutmeg.</span>
            </div>
        </td>
    </tr></table>

</div>

<br>

<div class="content-item">
    <a class="anchor" id="blend"></a>
    <div class="subheader_left">Multiresolutional Blending</div>

</div>

<br>

</div>
</body>
</html>